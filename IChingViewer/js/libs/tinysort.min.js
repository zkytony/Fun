!function(e,t){"use strict";function r(){return t}"function"==typeof define&&define.amd?define("tinysort",r):e.tinysort=t}(this,function(){"use strict";function e(e,n){function l(){0===arguments.length?g({}):t(arguments,function(e){g(A(e)?{selector:e}:e)}),d=R.length}function g(e){var t=!!e.selector,n=t&&":"===e.selector[0],o=r(e||{},m);R.push(r({hasSelector:t,hasAttr:!(o.attr===s||""===o.attr),hasData:o.data!==s,hasFilter:n,sortReturnNumber:"asc"===o.order?1:-1},o))}function v(){t(e,function(e,t){x?x!==e.parentNode&&(V=!1):x=e.parentNode;var r=R[0],n=r.hasFilter,o=r.selector,a=!o||n&&e.matchesSelector(o)||o&&e.querySelector(o),s=a?q:B,l={elm:e,pos:t,posn:s.length};M.push(l),s.push(l)}),w=q.slice(0)}function y(){q.sort(S)}function S(e,r){var n=0;for(0!==p&&(p=0);0===n&&d>p;){var s=R[p],l=s.ignoreDashes?f:u;if(t(h,function(e){var t=e.prepare;t&&t(s)}),s.sortFunction)n=s.sortFunction(e,r);else if("rand"==s.order)n=Math.random()<.5?1:-1;else{var c=a,m=b(e,s),g=b(r,s),v=""===m||m===o,y=""===g||g===o;if(m===g)n=0;else if(s.emptyEnd&&(v||y))n=v&&y?0:v?1:-1;else{if(!s.forceStrings){var S=A(m)?m&&m.match(l):a,F=A(g)?g&&g.match(l):a;if(S&&F){var N=m.substr(0,m.length-S[0].length),C=g.substr(0,g.length-F[0].length);N==C&&(c=!a,m=i(S[0]),g=i(F[0]))}}n=m===o||g===o?0:g>m?-1:m>g?1:0}}t(h,function(e){var t=e.sort;t&&(n=t(s,c,m,g,n))}),n*=s.sortReturnNumber,0===n&&p++}return 0===n&&(n=e.pos>r.pos?1:-1),n}function F(){var e=q.length===M.length;if(V&&e)$?q.forEach(function(e,t){e.elm.style.order=t}):x.appendChild(N());else{var t=R[0],r=t.place,n="org"===r,o="start"===r,a="end"===r,s="first"===r,l="last"===r;if(n)q.forEach(C),q.forEach(function(e,t){E(w[t],e.elm)});else if(o||a){var c=w[o?0:w.length-1],i=c.elm.parentNode,u=o?i.firstChild:i.lastChild;u!==c.elm&&(c={elm:u}),C(c),a&&i.appendChild(c.ghost),E(c,N())}else if(s||l){var f=w[s?0:w.length-1];E(C(f),N())}}}function N(){return q.forEach(function(e){D.appendChild(e.elm)}),D}function C(e){var t=e.elm,r=c.createElement("div");return e.ghost=r,t.parentNode.insertBefore(r,t),e}function E(e,t){var r=e.ghost,n=r.parentNode;n.insertBefore(t,r),n.removeChild(r),delete e.ghost}function b(e,t){var r,n=e.elm;return t.selector&&(t.hasFilter?n.matchesSelector(t.selector)||(n=s):n=n.querySelector(t.selector)),t.hasAttr?r=n.getAttribute(t.attr):t.useVal?r=n.value||n.getAttribute("value"):t.hasData?r=n.getAttribute("data-"+t.data):n&&(r=n.textContent),A(r)&&(t.cases||(r=r.toLowerCase()),r=r.replace(/\s+/g," ")),r}function A(e){return"string"==typeof e}A(e)&&(e=c.querySelectorAll(e)),0===e.length&&console.warn("No elements to sort");var w,x,D=c.createDocumentFragment(),M=[],q=[],B=[],R=[],V=!0,$=e.length&&(n===o||n.useFlex!==!1)&&-1!==getComputedStyle(e[0].parentNode,null).display.indexOf("flex");return l.apply(s,Array.prototype.slice.call(arguments,1)),v(),y(),F(),q.map(function(e){return e.elm})}function t(e,t){for(var r,n=e.length,o=n;o--;)r=n-o-1,t(e[r],r)}function r(e,t,r){for(var n in t)(r||e[n]===o)&&(e[n]=t[n]);return e}function n(e,t,r){h.push({prepare:e,sort:t,sortBy:r})}var o,a=!1,s=null,l=window,c=l.document,i=parseFloat,u=/(-?\d+\.?\d*)\s*$/g,f=/(\d+\.?\d*)\s*$/g,h=[],d=0,p=0,m={selector:s,order:"asc",attr:s,data:s,useVal:a,place:"org",returns:a,cases:a,forceStrings:a,ignoreDashes:a,sortFunction:s,useFlex:a,emptyEnd:a};return l.Element&&function(e){e.matchesSelector=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,r=(t.parentNode||t.document).querySelectorAll(e),n=-1;r[++n]&&r[n]!=t;);return!!r[n]}}(Element.prototype),r(n,{loop:t}),r(e,{plugin:n,defaults:m})}());
